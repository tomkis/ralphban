## 2026-01-08 - CHORE-001
- Installed pg and @types/pg dependencies
- Files changed: packages/server/package.json, pnpm-lock.yaml
- **Learnings:**
  - No type errors after dependency installation
  - pnpm workspace structure working correctly
---

## 2026-01-08 - CHORE-002
- Created PostgreSQL schema with tasks table
- Files changed: packages/server/db/schema.sql
- **Learnings:**
  - Added indexes on state and created_at for query performance
  - Using JSONB for steps array allows flexible storage
  - CHECK constraint ensures state values are valid
  - TEXT id type supports flexible format like CHORE-001
---

## 2026-01-08 - CHORE-003
- Created seed.sql with sample PRD data
- Files changed: packages/server/db/seed.sql
- **Learnings:**
  - Included 5 sample tasks across different categories (CHORE, fix, refactor, test, docs)
  - 3 tasks in ReadyForDev state, 2 in Done state for realistic workflow
  - JSONB arrays in SQL use JSON array syntax with proper escaping
  - DELETE before INSERT ensures clean seed data on re-runs
---

## 2026-01-08 - CHORE-004
- Created database client with PostgreSQL connection pooling
- Files changed: packages/server/src/db/client.ts, packages/server/.env.example
- **Learnings:**
  - Pool configured to support both DATABASE_URL and individual connection params
  - Supports flexible connection configuration via environment variables
  - Default values provided for local development (localhost, port 5432, ralphban database)
---

## 2026-01-08 - CHORE-005
- Created PRD repository layer for database operations
- Files changed: packages/server/src/db/types.ts, packages/server/src/db/prd-repository.ts
- **Learnings:**
  - PRDItem interface matches schema exactly with proper TypeScript typing
  - All repository functions use parameterized queries for SQL injection prevention
  - getNextPendingPRD() uses ASC ordering by created_at to process oldest first
  - updatePRDStatus() automatically updates updated_at timestamp
  - Repository pattern abstracts database operations from business logic
---
## 2026-01-08 - CHORE-006
- Created docker-compose.yml with PostgreSQL 16 alpine service
- Modified package.json dev script to auto-start docker-compose
- Files changed: packages/server/docker-compose.yml, packages/server/package.json
- **Learnings:**
  - docker-compose mounts ./db to /docker-entrypoint-initdb.d for auto schema/seed execution
  - healthcheck ensures db ready before app starts
  - dev script now runs docker-compose up -d before tsx watch
  - Added docker:up and docker:down utility scripts
---

