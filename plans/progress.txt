## 2026-01-09 - CHORE-001
- Created @ralphban/api package with tRPC setup
- Files changed:
  - packages/api/package.json (new)
  - packages/api/tsconfig.json (new)
  - packages/api/src/trpc.ts (new)
  - packages/api/src/router.ts (new)
  - packages/api/src/routers/kanban.ts (new)
  - packages/api/src/index.ts (new)
  - eslint.config.js (updated to include api package)
  - package.json (updated scripts to include api package)
- **Learnings:**
  - tRPC v11 uses @trpc/server package
  - zod v3 used for schema validation in kanban router
  - Task schema defined with id, title, status fields
  - Router exports AppRouter type for client type inference
---

## 2026-01-09 - CHORE-002 (CORRECTED in CHORE-004)
- Integrated @ralphban/api with server package using tRPC
- Files changed:
  - packages/server/package.json (added @ralphban/api and @trpc/server deps)
  - packages/server/src/trpc/context.ts (new - tRPC context)
  - packages/server/src/trpc/router.ts (new - server-side router impl)
  - packages/server/src/trpc/adapter.ts (new - Express adapter)
  - packages/server/src/trpc/index.ts (new - exports)
  - packages/server/src/index.ts (added /trpc endpoint)
- **Learnings:**
  - tRPC v11 uses fetchRequestHandler from @trpc/server/adapters/fetch
  - Express 5 requires `{*path}` syntax for wildcards, not `*`
  - ~~Server-side router mirrors api types but provides actual implementation~~ (WRONG - see CHORE-004)
  - getTasks returns empty array as specified
---

## 2026-01-09 - CHORE-003
- Integrated @ralphban/api with web package using tRPC React Query
- Files changed:
  - packages/web/package.json (added @ralphban/api, @tanstack/react-query, @trpc/client, @trpc/react-query)
  - packages/web/src/trpc/client.ts (new - tRPC React client)
  - packages/web/src/trpc/TRPCProvider.tsx (new - provider component)
  - packages/web/src/trpc/index.ts (new - exports)
  - packages/web/src/main.tsx (wrapped App with TRPCProvider)
  - packages/web/src/App.tsx (calls getTasks query)
- **Learnings:**
  - tRPC v11 React uses @trpc/react-query package
  - Requires @tanstack/react-query as peer dependency
  - createTRPCReact<AppRouter>() for typed client creation
  - TRPCProvider must wrap QueryClientProvider
  - httpBatchLink used for connecting to server endpoint
---

## 2026-01-09 - CHORE-004
- Fixed tRPC integration: API defines contract, Server implements
- Files changed:
  - packages/api/src/context.ts (new - Context interface with IKanbanService)
  - packages/api/src/trpc.ts (updated - init with Context type)
  - packages/api/src/routers/kanban.ts (updated - procedure uses ctx.kanban.getTasks())
  - packages/api/src/index.ts (updated - export Context, IKanbanService types)
  - packages/server/src/kanban/trpc-service.ts (new - implements IKanbanService)
  - packages/server/src/trpc/context.ts (updated - implements Context interface)
  - packages/server/src/trpc/router.ts (updated - re-exports from @ralphban/api)
  - packages/server/src/trpc/adapter.ts (updated - imports appRouter from @ralphban/api)
  - packages/server/src/trpc/index.ts (updated - re-exports from api)
- **Learnings:**
  - Correct tRPC pattern: API = contract (interfaces, router), Server = implementation
  - Context interface in API defines services procedures need (IKanbanService)
  - Server implements context by providing actual services
  - Procedures call context methods, not throw errors or return stubs
  - Server mapping layer converts DB types to API types
---

## 2026-01-09 - CHORE-004 (UI Cleanup)
- Removed all UI components from web package
- Files changed:
  - packages/web/src/components/ (deleted - ChatBubble, ChatInput, ChatContainer)
  - packages/web/src/hooks/ (deleted - useChatMessages)
  - packages/web/src/App.tsx (simplified - renders null, keeps tRPC query)
  - eslint.config.js (fixed - **/dist and **/node_modules ignores)
  - .prettierignore (new - ignores dist, node_modules, .ralph-test-workdir)
  - packages/*/package.json (updated lint scripts to use --ignore-path)
  - packages/server/src/kanban/trpc-service.ts (prettier fix)
- **Learnings:**
  - ESLint ignores need **/dist pattern for nested packages
  - Prettier needs --ignore-path in package scripts to find root .prettierignore
  - Each package runs lint from its own directory, not monorepo root
---

## 2026-01-09 - FEAT-001
- Created ticket board UI with two columns: Todo and Done
- Files changed:
  - packages/web/src/App.tsx (rewrote - Kanban board with TaskCard and Column components)
- **Learnings:**
  - Task status `in_progress` treated as part of Todo column (only two columns required)
  - tRPC useQuery with `refetchInterval: 3000` for polling data changes
  - Import `type Task` from @ralphban/api for typed task handling
---

## 2026-01-09 - FEAT-002
- Added Start Ralph button with state-based enable/disable logic
- Files changed:
  - packages/api/src/routers/ralph.ts (new - ralph router with getStatus query and start mutation)
  - packages/api/src/context.ts (updated - added IRalphService interface)
  - packages/api/src/router.ts (updated - added ralph router)
  - packages/api/src/index.ts (updated - exported ralph types)
  - packages/server/src/ralph/trpc-service.ts (new - implements IRalphService with in-memory running state)
  - packages/server/src/trpc/context.ts (updated - added ralph service to context)
  - packages/web/src/App.tsx (updated - StartRalphButton component with polling)
- **Learnings:**
  - In-memory state sufficient for tracking single ralph process
  - Ralph status polled at 1s interval for responsiveness
  - Button disabled when: no ready tasks OR ralph already running
  - runRalphLoop runs async, finally block resets isRunning state
---
