## 2026-01-08 - CHORE-003
- Removed agent folder from packages/server/src/agent
- Removed @ai-sdk/anthropic and ai dependencies from package.json
- Kept @modelcontextprotocol/sdk as it's used by MCP server (not agent)
- Files changed: packages/server/package.json, packages/server/src/agent/ (deleted)
- **Learnings:**
  - MCP server is separate from agent - don't remove MCP SDK
  - eventsource-parser is used by MCP SDK, not agent directly
---

## 2026-01-08 - CHORE-002
- Created packages/server/src/kanban folder
- Moved types.ts, repository.ts (was prd-repository.ts), service.ts (was task-service.ts) to kanban/
- Removed old db/types.ts, db/prd-repository.ts, services/ folder
- Updated mcp/server.ts import to use kanban/service
- Files changed: packages/server/src/kanban/* (created), packages/server/src/db/* (cleaned), packages/server/src/mcp/server.ts
- **Learnings:**
  - db/ folder now only contains client.ts for database connection
  - kanban/ owns business logic: types, repository, service
---

## 2026-01-08 - CHORE-001
- Renamed PRDItem interface to Task in types.ts
- Renamed repository functions: getAllPRDs→getAllTasks, getNextPendingPRD→getNextPendingTask, updatePRDStatus→updateTaskStatus
- Removed unused getPRDById function
- Updated service.ts imports to use new repository function names
- Files changed: packages/server/src/kanban/types.ts, repository.ts, service.ts
- **Learnings:**
  - Service and repository now share consistent Task naming
  - Used alias import (getAllTasks as getAllTasksFromRepo) to avoid name collision between service and repository exports
---

## 2026-01-08 - CHORE-004
- Installed concurrently package in root workspace
- Updated root package.json: dev, typecheck, lint, fix scripts now use concurrently
- Updated server, web, integration-tests: lint/fix scripts now run eslint and prettier concurrently
- Files changed: package.json, packages/server/package.json, packages/web/package.json, packages/integration-tests/package.json
- **Learnings:**
  - concurrently provides better output handling than shell `&` operator
  - Sub-package lint/fix can also run eslint+prettier in parallel since they operate independently
  - Sequential `&&` kept for scripts where order matters (e.g., docker-compose before tsx, tsc before vite build)
---

## 2026-01-08 - CHORE-005
- Added -n and -c flags to concurrently scripts in root package.json
- Server: green color, "Server" title
- Web: blue color, "Web" title
- Tests: yellow color, "Tests" title (for integration-tests in typecheck/lint/fix)
- Files changed: package.json
- **Learnings:**
  - concurrently uses -n for comma-separated names, -c for comma-separated colors
  - Order of names/colors must match order of commands
  - Colors improve terminal readability when multiple processes output simultaneously
---

## 2026-01-08 - CHORE-006
- Made server port configurable via PORT environment variable
- Default port remains 3001 when PORT is not set
- Files changed: packages/server/src/index.ts
- **Learnings:**
  - dotenv/config already imported, just need to read process.env.PORT
  - parseInt with radix 10 ensures proper number conversion
---

## 2026-01-08 - CHORE-007
- Created scripts/tests.sh bash script for running integration tests
- Script finds available port using python3 socket, starts server, waits for readiness, runs tests
- Updated integration tests to use SERVER_PORT env var instead of hardcoded 3001
- Files changed: scripts/tests.sh (created), packages/integration-tests/tests/mcp-server.test.ts
- **Learnings:**
  - python3 -c with socket.bind(("", 0)) reliably finds available port
  - curl to /mcp endpoint works for health check (returns response even with empty body)
  - trap cleanup EXIT ensures server stops even on script failure
---
