[
  {
    "id": "chore-001",
    "category": "chore",
    "title": "Create unified entry point in server package",
    "description": "Server package needs single index.ts that routes to HTTP or MCP mode based on --mcp flag. Move cli.ts and mcp-cli.ts logic into server package.",
    "steps": [
      "Copy cli.ts from packages/cli/src to packages/server/src",
      "Copy mcp-cli.ts from packages/mcp-cli/src to packages/server/src",
      "Create new index.ts with arg parsing",
      "Route to cli.ts or mcp-cli.ts based on --mcp flag",
      "Add shebang to index.ts"
    ],
    "passes": true
  },
  {
    "id": "chore-002",
    "category": "chore",
    "title": "Update server package.json configuration",
    "description": "Server package must be publishable with bin entry, include yargs dependency, and handle web-dist copying.",
    "steps": [
      "Add bin entry pointing to dist/index.js",
      "Set private to false",
      "Add yargs dependency",
      "Add prebuild script to copy web-dist",
      "Update build script to chmod +x dist/index.js"
    ],
    "passes": true
  },
  {
    "id": "chore-003",
    "category": "chore",
    "title": "Update root package.json bin entry",
    "description": "Root package needs bin entry pointing to server's index.js for npx usage.",
    "steps": [
      "Add bin entry to root package.json",
      "Point bin to packages/server/dist/index.js",
      "Remove build:cli and build:mcp from scripts",
      "Update build:all to exclude cli and mcp",
      "Remove cli and mcp from typecheck/lint/fix scripts"
    ],
    "passes": true
  },
  {
    "id": "chore-004",
    "category": "chore",
    "title": "Remove packages/cli directory",
    "description": "CLI package is now redundant as functionality moved to server package.",
    "steps": ["Delete packages/cli directory entirely"],
    "passes": true
  },
  {
    "id": "chore-005",
    "category": "chore",
    "title": "Remove packages/mcp-cli directory",
    "description": "MCP CLI package is now redundant as functionality moved to server package.",
    "steps": ["Delete packages/mcp-cli directory entirely"],
    "passes": true
  },
  {
    "id": "chore-006",
    "category": "chore",
    "title": "Verify HTTP server mode works",
    "description": "Test that running ralphban without flags starts HTTP server with all features.",
    "steps": [
      "Build server package",
      "Run ralphban without flags",
      "Verify git validation runs",
      "Verify DB initialization runs",
      "Verify HTTP server starts on correct port",
      "Verify static web serving works",
      "Verify graceful shutdown works"
    ],
    "passes": true
  },
  {
    "id": "chore-007",
    "category": "chore",
    "title": "Verify MCP server mode works",
    "description": "Test that running ralphban --mcp starts MCP stdio server correctly.",
    "steps": [
      "Run ralphban with --mcp flag",
      "Verify MCP server starts",
      "Verify DB client connects",
      "Verify stdio transport connects",
      "Verify graceful shutdown works"
    ],
    "passes": true
  },
  {
    "id": "bug-001",
    "category": "bug",
    "title": "E2E test for ralph is using direct rest endpoint, it should use tRPC instead",
    "description": "There should be no direct rest endpoints in the server, only tRPC is exposed as the API. We need to create tRPC client and use it to run the integration test",
    "steps": [
      "Remove the direct rest endpoint from the server",
      "Install trpc client to the integration tests package",
      "Depend on the API package",
      "Create tRPC client",
      "Update integration test to use tRPC client"
    ],
    "passes": false
  }
]
